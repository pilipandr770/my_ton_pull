# contracts/README.md

## Форк і патч офіційного пулу TON

### Кроки для створення immutable контракту

1) **Форкніть офіційний репозиторій** (nominator-pool / liquid-staking):
   ```powershell
   cd C:\Users\ПК\my_ton_pull\contracts
   git clone https://github.com/<your-username>/<your-ton-fork>.git repo
   ```

2) **У вихідному коді знайдіть owner/admin** у конструкторі/init функціях.

3) **Замініть owner/admin на нульові адреси** формату TON:
   ```
   0:0000000000000000000000000000000000000000000000000000000000000000
   ```

4) **Видаліть/заблокуйте** будь-які функції setOwner/setAdmin/upgrade:
   - Закоментуйте або видаліть методи апгрейду
   - Перевірте відсутність прихованих backdoor функцій
   - Переконайтеся, що немає можливості змінити власника після деплою

5) **Налаштуйте параметри:**
   - `min_stake` — мінімальний депозит
   - Переконайтесь, що немає fee-адрес власника
   - Весь дохід розподіляється між учасниками пропорційно

6) **Перекомпілюйте та тестуйте:**
   ```powershell
   # Компіляція (замініть на ваші команди)
   cd repo
   # func -o build/output.fif src/*.fc
   
   # Запуск тестів
   # npm test або інші команди залежно від проєкту
   ```

7) **Деплой у testnet:**
   ```powershell
   cd C:\Users\ПК\my_ton_pull\scripts
   .\deploy.ps1 -NETWORK testnet
   ```

8) **Збережіть артефакти:**
   - Адреси контрактів
   - State-init дані
   - Data cells
   - Результати тестів

### Чек-ліст безпеки перед mainnet

- [ ] Owner/Admin = нульові адреси
- [ ] Відсутні функції upgrade/setOwner/setAdmin
- [ ] Немає прихованих backdoor функцій
- [ ] Всі тести пройдені успішно
- [ ] Fuzz тестування виконано (якщо доступно)
- [ ] Код перевірено на testnet
- [ ] Проведено незалежний аудит безпеки
- [ ] Немає fee-адрес власника в коді
- [ ] Документація оновлена

### ВАЖЛИВО
> ⚠️ Перед mainnet — обов'язково проведіть незалежний аудит коду!
> 
> ⚠️ Ніякої логіки підписок/авторизацій у контракті!
> 
> ⚠️ Приватні ключі валідатора НІКОЛИ не зберігаються в репозиторії!

### Структура папки contracts

```
contracts/
├── README.md                      # Цей файл
├── patch_owner_example.ps1        # Скрипт для автоматичного патчу
└── repo/                          # Форк офіційного TON пулу (клонувати окремо)
    ├── src/                       # Вихідні коди контрактів
    ├── tests/                     # Тести
    ├── build/                     # Скомпільовані артефакти
    └── README.md                  # Оригінальна документація
```
