# –ê–Ω–∞–ª—ñ–∑ TON Nominator Pool –ö–æ–Ω—Ç—Ä–∞–∫—Ç—É

## –ó–Ω–∞–π–¥–µ–Ω—ñ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∏ –∫–æ–Ω—Ç—Ä–æ–ª—é

### 1. validator_address (–ö–†–ò–¢–ò–ß–ù–û!)

**–§–∞–π–ª:** `func/pool.fc`

**–ü—Ä–∏–∑–Ω–∞—á–µ–Ω–Ω—è:** –ê–¥—Ä–µ—Å–∞ –≤–∞–ª—ñ–¥–∞—Ç–æ—Ä–∞, —è–∫–∞ –º–∞—î –ø–æ–≤–Ω–∏–π –∫–æ–Ω—Ç—Ä–æ–ª—å –Ω–∞–¥ –ø—É–ª–æ–º.

**–í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è:**
- –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—è –æ–ø–µ—Ä–∞—Ü—ñ–π (—Ä—è–¥–∫–∏ 382, 422, 591, 599, 618)
- –û—Ç—Ä–∏–º–∞–Ω–Ω—è –∫–æ—à—Ç—ñ–≤ –ø—Ä–∏ withdrawal (—Ä—è–¥–æ–∫ 610)
- –ö–æ–Ω—Ç—Ä–æ–ª—å —Å—Ç–µ–π–∫—ñ–Ω–≥—É —Ç–∞ –≤—ñ–¥–Ω–æ–≤–ª–µ–Ω–Ω—è stake

**–ö–æ–¥ –ø–µ—Ä–µ–≤—ñ—Ä–æ–∫:**
```func
throw_unless(62, sender_addr != validator_address);  // –†—è–¥–æ–∫ 382
int authorized = (sender_wc == -1) & (sender_addr == validator_address); // –†—è–¥–æ–∫ 422
throw_unless(73, (sender_wc == -1) & (sender_addr == validator_address)); // –†—è–¥–æ–∫ 591
```

### 2. –Ü–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—è –ø—É–ª—É

**–§–∞–π–ª:** `func/new-pool.fif`

**–†—è–¥–æ–∫ 9:** –ü–∞—Ä–∞–º–µ—Ç—Ä `$1` = `validator_address`
```fift
$1 true parse-load-address drop swap 1+ abort"only masterchain smartcontracts may participate in validator elections"
constant validator_address
```

**–†—è–¥–æ–∫ 40-42:** –ó–±–µ—Ä–µ–∂–µ–Ω–Ω—è —É data:
```fift
<b validator_address 256 u, validator_reward_share 16 u, ...
```

### 3. –§—É–Ω–∫—Ü—ñ—ó, —è–∫—ñ –ø–æ—Ç—Ä–µ–±—É—é—Ç—å –ø–∞—Ç—á—É

#### –ö—Ä–∏—Ç–∏—á–Ω—ñ –æ–ø–µ—Ä–∞—Ü—ñ—ó, –∫–æ–Ω—Ç—Ä–æ–ª—å–æ–≤–∞–Ω—ñ validator_address:

1. **new_stake** (op 0x4e73744b) - –≤—ñ–¥–ø—Ä–∞–≤–∫–∞ —Å—Ç–µ–π–∫—É –≤ elector
2. **recover_stake** (op 0x47657424) - –ø–æ–≤–µ—Ä–Ω–µ–Ω–Ω—è —Å—Ç–µ–π–∫—É –∑ elector
3. **update_validator_set** - –æ–Ω–æ–≤–ª–µ–Ω–Ω—è –Ω–∞–±–æ—Ä—É –≤–∞–ª—ñ–¥–∞—Ç–æ—Ä—ñ–≤
4. **withdraw** - –≤–∏–ª—É—á–µ–Ω–Ω—è –∫–æ—à—Ç—ñ–≤

## –ü–ª–∞–Ω –ø–∞—Ç—á—É –¥–ª—è Immutable Pool

### –ï—Ç–∞–ø 1: –ù—É–ª—å–æ–≤–∞ –∞–¥—Ä–µ—Å–∞ validator

**–©–æ —Ä–æ–±–∏—Ç–∏:**
1. –£ `new-pool.fif` –∑–∞–º—ñ–Ω–∏—Ç–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä –Ω–∞ –Ω—É–ª—å–æ–≤—É –∞–¥—Ä–µ—Å—É:
   ```fift
   0 constant validator_address
   ```
   –∞–±–æ –ø–µ—Ä–µ–¥–∞–≤–∞—Ç–∏ `0:0000000000000000000000000000000000000000000000000000000000000000`

### –ï—Ç–∞–ø 2: –í–∏–¥–∞–ª–∏—Ç–∏/–∑–∞–±–ª–æ–∫—É–≤–∞—Ç–∏ –∫–æ–Ω—Ç—Ä–æ–ª—å–æ–≤–∞–Ω—ñ –æ–ø–µ—Ä–∞—Ü—ñ—ó

**–û–ø—Ü—ñ—ó:**

**–ê) –ü–æ–≤–Ω—ñ—Å—Ç—é –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∏–π –ø—É–ª (—Ä–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω–æ):**
- –í–∏–¥–∞–ª–∏—Ç–∏ –≤—Å—ñ –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏ `throw_unless(..., sender_addr == validator_address)`
- –î–æ–∑–≤–æ–ª–∏—Ç–∏ –æ–ø–µ—Ä–∞—Ü—ñ—ó —Å—Ç–µ–π–∫—ñ–Ω–≥—É –±—É–¥—å-—è–∫–æ–º—É —É—á–∞—Å–Ω–∏–∫—É (–∞–±–æ —á–µ—Ä–µ–∑ –∞–≤—Ç–æ–º–∞—Ç–∏–∫—É)
- –ó–±–µ—Ä–µ–≥—Ç–∏ —Ç—ñ–ª—å–∫–∏ –ø–µ—Ä–µ–≤—ñ—Ä–∫—É –±–∞–ª–∞–Ω—Å—É —Ç–∞ –±–µ–∑–ø–µ—á–Ω–æ—Å—Ç—ñ –æ–ø–µ—Ä–∞—Ü—ñ—ó

**–ë) –ë–ª–æ–∫—É–≤–∞–Ω–Ω—è –Ω–µ–±–µ–∑–ø–µ—á–Ω–∏—Ö –æ–ø–µ—Ä–∞—Ü—ñ–π:**
- –ó–∞–º—ñ–Ω–∏—Ç–∏ –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏ –Ω–∞ `throw(...)` —â–æ–± –∑–∞–±–ª–æ–∫—É–≤–∞—Ç–∏ —Ü—ñ –æ–ø–µ—Ä–∞—Ü—ñ—ó –Ω–∞–∑–∞–≤–∂–¥–∏
- –ü—É–ª —Å—Ç–∞–Ω–µ —Å—Ç–∞—Ç–∏—á–Ω–∏–º (–Ω–µ –∑–º–æ–∂–µ —Å—Ç–µ–π–∫–∞—Ç–∏)

**–í) –î–µ—Ü–µ–Ω—Ç—Ä–∞–ª—ñ–∑–æ–≤–∞–Ω–µ –≥–æ–ª–æ—Å—É–≤–∞–Ω–Ω—è (—Å–∫–ª–∞–¥–Ω–æ):**
- –ó–∞–º—ñ–Ω–∏—Ç–∏ –ø–µ—Ä–µ–≤—ñ—Ä–∫—É validator_address –Ω–∞ multi-sig –∞–±–æ DAO –ª–æ–≥—ñ–∫—É
- –ü–æ—Ç—Ä–µ–±—É—î –∑–Ω–∞—á–Ω–æ—ó –ø–µ—Ä–µ—Ä–æ–±–∫–∏

### –ï—Ç–∞–ø 3: –ü–∞—Ä–∞–º–µ—Ç—Ä–∏ –ø—É–ª—É

**–ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è —É `new-pool.fif`:**

```fift
0 constant validator_address                    # –ù—É–ª—å–æ–≤–∞ –∞–¥—Ä–µ—Å–∞
0 =: validator_reward_share                     # 0% –∫–æ–º—ñ—Å—ñ—ó –¥–ª—è "–≤–ª–∞—Å–Ω–∏–∫–∞"
40 =: max_nominators_count                      # –ú–∞–∫—Å–∏–º—É–º —É—á–∞—Å–Ω–∏–∫—ñ–≤
1000000000000 =: min_validator_stake            # 1000 TON –º—ñ–Ω—ñ–º–∞–ª—å–Ω–∏–π —Å—Ç–µ–π–∫ –≤–∞–ª—ñ–¥–∞—Ç–æ—Ä–∞
10000000000 =: min_nominator_stake              # 10 TON –º—ñ–Ω—ñ–º–∞–ª—å–Ω–∏–π —Å—Ç–µ–π–∫ –Ω–æ–º—ñ–Ω–∞—Ç–æ—Ä–∞
```

## –í–∏—è–≤–ª–µ–Ω—ñ —Ä–∏–∑–∏–∫–∏

### üî¥ –ö–†–ò–¢–ò–ß–ù–Ü:

1. **validator_address –º–∞—î –ø–æ–≤–Ω–∏–π –∫–æ–Ω—Ç—Ä–æ–ª—å** –Ω–∞–¥:
   - –°—Ç–µ–π–∫—ñ–Ω–≥–æ–º —Ç–∞ –π–æ–≥–æ –≤—ñ–¥–Ω–æ–≤–ª–µ–Ω–Ω—è–º
   - –í–∏–≤–µ–¥–µ–Ω–Ω—è–º –∫–æ—à—Ç—ñ–≤
   - –ö–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—î—é –≤–∞–ª—ñ–¥–∞—Ç–æ—Ä—ñ–≤

2. **–ë–µ–∑ validator_address –∫–æ–Ω—Ç—Ä–∞–∫—Ç –ù–ï –ó–ú–û–ñ–ï:**
   - –í—ñ–¥–ø—Ä–∞–≤–ª—è—Ç–∏ —Å—Ç–µ–π–∫ –≤ elector
   - –í—ñ–¥–Ω–æ–≤–ª—é–≤–∞—Ç–∏ —Å—Ç–µ–π–∫ –ø—ñ—Å–ª—è —Ä–∞—É–Ω–¥—É
   - –ö–µ—Ä—É–≤–∞—Ç–∏ –ø—Ä–æ—Ü–µ—Å–æ–º –≤–∞–ª—ñ–¥–∞—Ü—ñ—ó

### üü° –í–ê–ñ–õ–ò–í–Ü:

1. **validator_reward_share** - —á–∞—Å—Ç–∫–∞ –≤–∏–Ω–∞–≥–æ—Ä–æ–¥–∏ –≤–∞–ª—ñ–¥–∞—Ç–æ—Ä–∞ (0-10000, –¥–µ 10000 = 100%)
   - –ü–û–¢–†–Ü–ë–ù–û –≤—Å—Ç–∞–Ω–æ–≤–∏—Ç–∏ –Ω–∞ 0 –¥–ª—è immutable pool

2. **–§—É–Ω–∫—Ü—ñ—ó –≥–æ–ª–æ—Å—É–≤–∞–Ω–Ω—è** –∑–∞ proposals:
   - –¢–∞–∫–æ–∂ –∫–æ–Ω—Ç—Ä–æ–ª—é—é—Ç—å—Å—è validator_address
   - –ü–æ—Ç—Ä—ñ–±–Ω–æ –≤–∏–¥–∞–ª–∏—Ç–∏ –∞–±–æ –∑–∞–±–ª–æ–∫—É–≤–∞—Ç–∏

### üü¢ –Ü–ù–§–û–†–ú–ê–¶–Ü–ô–ù–Ü:

1. Nominators –º–æ–∂—É—Ç—å –≤—ñ–ª—å–Ω–æ deposit/withdraw —á–µ—Ä–µ–∑ –±–∞–∑–æ–≤—ñ –æ–ø–µ—Ä–∞—Ü—ñ—ó
2. –†–æ–∑–ø–æ–¥—ñ–ª –≤–∏–Ω–∞–≥–æ—Ä–æ–¥ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∏–π (–ø—Ä–æ–ø–æ—Ä—Ü—ñ–π–Ω–æ —Å—Ç–µ–π–∫—É)
3. –ú—ñ–Ω—ñ–º–∞–ª—å–Ω—ñ –¥–µ–ø–æ–∑–∏—Ç–∏ –Ω–∞–ª–∞—à—Ç–æ–≤—É—é—Ç—å—Å—è –ø—Ä–∏ —Å—Ç–≤–æ—Ä–µ–Ω–Ω—ñ

## –†–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω–∏–π –ø—ñ–¥—Ö—ñ–¥

### –í–∞—Ä—ñ–∞–Ω—Ç 1: –ê–≤—Ç–æ–Ω–æ–º–Ω–∏–π –ø—É–ª –∑ –ø—É–±–ª—ñ—á–Ω–∏–º –∫–ª—é—á–µ–º (—Ä–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω–æ)

–ó–∞–º—ñ—Å—Ç—å –ø–æ–≤–Ω–æ–≥–æ –≤–∏–¥–∞–ª–µ–Ω–Ω—è validator_address:
1. –°—Ç–≤–æ—Ä–∏—Ç–∏ —Å–ø–µ—Ü—ñ–∞–ª—å–Ω–∏–π wallet –∑ **–ø—É–±–ª—ñ—á–Ω–∏–º –ø—Ä–∏–≤–∞—Ç–Ω–∏–º –∫–ª—é—á–µ–º** (–æ–ø—É–±–ª—ñ–∫—É–≤–∞—Ç–∏ seed)
2. –¶–µ–π wallet –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è —Ç—ñ–ª—å–∫–∏ –¥–ª—è —Ç–µ—Ö–Ω—ñ—á–Ω–∏—Ö –æ–ø–µ—Ä–∞—Ü—ñ–π (new_stake/recover_stake)
3. Wallet –ù–ï –º–∞—î –∫–æ—à—Ç—ñ–≤ –æ–∫—Ä—ñ–º gas –¥–ª—è —Ç—Ä–∞–Ω–∑–∞–∫—Ü—ñ–π
4. –ë—É–¥—å-—Ö—Ç–æ –º–æ–∂–µ –≤–∏–∫–ª–∏–∫–∞—Ç–∏ –æ–ø–µ—Ä–∞—Ü—ñ—ó –≤—ñ–¥ —ñ–º–µ–Ω—ñ —Ü—å–æ–≥–æ wallet

**–ü–µ—Ä–µ–≤–∞–≥–∏:**
- –ö–æ–Ω—Ç—Ä–∞–∫—Ç –ø—Ä–∞—Ü—é—î —è–∫ –∑–≤–∏—á–∞–π–Ω–æ
- –ü–æ–≤–Ω–∞ –ø—Ä–æ–∑–æ—Ä—ñ—Å—Ç—å (–ø—Ä–∏–≤–∞—Ç–Ω–∏–π –∫–ª—é—á –ø—É–±–ª—ñ—á–Ω–∏–π)
- –ë—É–¥—å-—Ö—Ç–æ –º–æ–∂–µ –∫–µ—Ä—É–≤–∞—Ç–∏ —Å—Ç–µ–π–∫—ñ–Ω–≥–æ–º

**–ù–µ–¥–æ–ª—ñ–∫–∏:**
- –¢–µ–æ—Ä–µ—Ç–∏—á–Ω–æ —Ö—Ç–æ—Å—å –º–æ–∂–µ —Å–ø–∞–º–∏—Ç–∏ –Ω–µ–ø–æ—Ç—Ä—ñ–±–Ω–∏–º–∏ –æ–ø–µ—Ä–∞—Ü—ñ—è–º–∏
- –ü–æ—Ç—Ä—ñ–±–Ω–∞ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü—ñ—è –¥–ª—è –≤–∏–∫–ª–∏–∫—ñ–≤

### –í–∞—Ä—ñ–∞–Ω—Ç 2: –§–æ—Ä–∫ –∑ –≤–∏–¥–∞–ª–µ–Ω–Ω—è–º validator –ø–µ—Ä–µ–≤—ñ—Ä–æ–∫

–í–∏–¥–∞–ª–∏—Ç–∏ –≤—Å—ñ `throw_unless` –¥–ª—è validator_address —ñ –∑—Ä–æ–±–∏—Ç–∏ –æ–ø–µ—Ä–∞—Ü—ñ—ó –ø—É–±–ª—ñ—á–Ω–∏–º–∏.

**–ü–µ—Ä–µ–≤–∞–≥–∏:**
- –ü–æ–≤–Ω—ñ—Å—Ç—é decentralized
- –ù–µ–º–∞—î —Ü–µ–Ω—Ç—Ä–∞–ª—å–Ω–æ—ó —Ç–æ—á–∫–∏ –∫–æ–Ω—Ç—Ä–æ–ª—é

**–ù–µ–¥–æ–ª—ñ–∫–∏:**
- –ü–æ—Ç—Ä–µ–±—É—î –∑–Ω–∞—á–Ω–æ—ó –ø–µ—Ä–µ—Ä–æ–±–∫–∏ –ª–æ–≥—ñ–∫–∏
- –°–∫–ª–∞–¥–Ω—ñ—à–µ —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è
- –ú–æ–∂–µ –±—É—Ç–∏ –Ω–µ–±–µ–∑–ø–µ—á–Ω–æ (—Å–ø–∞–º-–∞—Ç–∞–∫–∏)

## –ù–∞—Å—Ç—É–ø–Ω—ñ –∫—Ä–æ–∫–∏

1. ‚úÖ –ü—Ä–æ–∞–Ω–∞–ª—ñ–∑—É–≤–∞—Ç–∏ –∫–æ–Ω—Ç—Ä–∞–∫—Ç (–∑–∞–≤–µ—Ä—à–µ–Ω–æ)
2. ‚è≥ –í–∏–±—Ä–∞—Ç–∏ –ø—ñ–¥—Ö—ñ–¥ (–í–∞—Ä—ñ–∞–Ω—Ç 1 –∞–±–æ 2)
3. ‚è≥ –°—Ç–≤–æ—Ä–∏—Ç–∏ –ø–∞—Ç—á —Ñ–∞–π–ª–∏
4. ‚è≥ –ü—Ä–æ–≥–Ω–∞—Ç–∏ —Ç–µ—Å—Ç–∏
5. ‚è≥ –î–µ–ø–ª–æ–π —É testnet
6. ‚è≥ –ê—É–¥–∏—Ç –±–µ–∑–ø–µ–∫–∏

---

**–î–∞—Ç–∞ –∞–Ω–∞–ª—ñ–∑—É:** 2025-11-02
**–í–µ—Ä—Å—ñ—è –∫–æ–Ω—Ç—Ä–∞–∫—Ç—É:** TON nominator-pool (–æ—Ñ—ñ—Ü—ñ–π–Ω–∏–π —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ–π)
